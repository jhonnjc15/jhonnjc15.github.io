---
import { Image } from 'astro:assets';
import PageHeader from "@components/PageHeader.astro";
import config from "@config/config.json";
import Base from "@layouts/Base.astro";
import { getEntryBySlug } from "astro:content";
import Form from "@layouts/function-components/Form";
import Social from "@components/Social.astro";
import { getEntry } from "astro:content";
import social from "@config/social.json";
import GlowShape from '@layouts/GlowShape.astro';


const { currentLocale } = Astro
const fallbackLocale = 'es';
let entry = await getEntry("contact", currentLocale);
if (!entry) {
  entry = await getEntry("contact", fallbackLocale);
}

// console.log('entry')
// console.log(entry)

const { title, page_title, form_content_data } = entry.data;
const allowedNetworks = ["facebook", "linkedin", "instagram", "youtube", "tiktok", "whatsapp", "telegram"];

const { contact_form_action } = config.params;
const contact = entry.data;
const page_data = {
  ...contact,
  content: contact.body,
};
// console.log('page_data')
// console.log(page_data)


export async function getStaticPaths() {
  return [{ params: { lang: 'es' } }, { params: { lang: 'en' } }]
}

---

<Base
  title={contact.title}
  meta_title={contact.meta_title}
  description={contact.description}
  image={contact.image}
>
  <section data-animate="fade-right" class="page-hero pb-4 pt-12" >
    <div class="container">
      <PageHeader page_data={page_data} />
    </div>
  </section>

  <section class="section">
  <div class="container">
    <article class="relative overflow-hidden rounded-[32px] shadow-2xl border border-emerald-200/70 dark:border-emerald-900/60">
      <Image
        src="/images/contact/hero/contact_background.jpg"
        height={720}
        width={1280}
        quality={95}
        class="absolute inset-0 h-full w-full object-cover [image-rendering:optimizeQuality]"
        alt=""
      />
      <div class="absolute inset-0 bg-gradient-to-r from-black/45 via-black/30 to-black/20"></div>
      
      <div class="relative px-4 py-12 sm:px-8 md:px-12 lg:px-16 text-white">
        <div class="grid gap-10 lg:grid-cols-[1.1fr_0.9fr] lg:items-center">
          {/* Columna de texto */}
          <div data-animate="fade-up" class="space-y-4 min-w-0">
            <p class="text-[0.75rem] uppercase tracking-[0.32em] font-semibold text-secondary drop-shadow">
              {contact.hero_tagline}
            </p>
            <h2 class="text-3xl md:text-4xl font-extrabold leading-tight drop-shadow-lg">
              {contact.hero_description}
            </h2>
            <p class="text-white/90 text-base leading-relaxed drop-shadow">
              {contact.cta_text}
            </p>
          </div>

          {/* Columna del formulario + redes  sm:p-8 lg:p-4 */}
          <div data-animate="fade-up" class="min-w-0">
            <div
              data-animate="fade-right"
              class="bg-white/15 backdrop-blur-xl rounded-3xl px-4 py-8 sm:p-10 lg:p-8 border border-white/25 shadow-2xl w-full"
            >
              <Form
                form_content_data={form_content_data}
                transition:persist
                client:visible
              />

              <div class="my-6 border-t border-white/25 dark:border-white/20" aria-hidden="true"></div>

              <Social
                source={social}
                networks={allowedNetworks}
                className="flex flex-wrap items-center justify-center gap-3 text-xl"
                forceLight={true}
              />
            </div>
          </div>
        </div>
      </div>
    </article>
  </div>
</section>



  <section class="section" data-animate="fade-up">
    <div class="container">
      <div class="rounded-3xl bg-gradient-to-r from-primary/10 via-secondary/10 to-primary/10 border border-gray-200 dark:border-gray-700 px-6 sm:px-10 py-10 text-center">
        <h3 class="text-2xl md:text-3xl font-bold text-default">{contact.closing_title}</h3>
        <p class="mt-3 text-text-offset leading-relaxed max-w-3xl mx-auto">{contact.closing_description}</p>
      </div>
    </div>
  </section>

</Base>
