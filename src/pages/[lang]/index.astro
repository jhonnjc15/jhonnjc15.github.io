---
import Base from "@layouts/Base.astro";
import Banner from "@layouts/components/Banner.astro";
import KeyFeatures from "@layouts/components/KeyFeatures.astro";
import Testimonial from "@layouts/components/Testimonial.astro";
import Service from "@layouts/components/Service.astro";
import Cta from "@layouts/partials/Cta.astro";
import { getEntryBySlug } from "astro:content";
import ProductsExperiencesHome from "@components/products/ProductsExperiencesHome.astro"
import { getEntry } from "astro:content";
import BackgroundVideo from "@components/BackgroundVideo.astro";
import GaleriaPaqari from "@components/Galeria_Paqari.astro";
import VideoComponent from "@layouts/function-components/VideoComponent";


const { currentLocale } = Astro
const fallbackLocale = 'es';
let homepage = await getEntry("homepage", currentLocale);
if (!homepage) {
  homepage = await getEntry("homepage", fallbackLocale);
}
// console.log('homepage')
 console.log(homepage)

const home = homepage.data;
const page_data = {
  ...home,
  content: home.body,
};

//console.log(homepage)
const { banner, key_features, service, testimonial, galery } = homepage.data;

const demoVideo = {
  id: "ysz5S6PUM-U",
  title: "Paqari open lab in action",
  description:
    "Watch a quick walkthrough of how our community collaborates with technology, prototypes, and hands-on experiments to bring ideas to life.",
};

export async function getStaticPaths() {
  return [{ params: { lang: 'es' } }, { params: { lang: 'en' } }]
}
const video_path = "/images/background-video.mp4"
---
<Base>
  {/*
  <div class="-z-50 absolute w-full h-screen bg-no-repeat bg-center lg:bg-cover bg-[url('/images/home-background.jpg')] top-0 opacity-50 ">
  </div>
  */}
  <BackgroundVideo src={video_path}/>
  <!-- banner -->
  <Banner banner={banner} />

  <section class="section relative overflow-hidden py-16">
    <div class="pointer-events-none absolute inset-0 -z-10 bg-gradient-to-b from-transparent via-paqariGreen/5 to-transparent"></div>
    <div class="container grid gap-12 lg:grid-cols-[1fr_minmax(0,1.1fr)] lg:items-center">
      <div class="space-y-4 max-w-2xl">
        <p class="text-sm uppercase tracking-[0.2em] text-paqariGreen">Demo en vivo</p>
        <h2 class="text-3xl font-extrabold leading-tight text-default md:text-4xl">Experimenta el laboratorio abierto de Paqari</h2>
        <p class="text-lg text-text-offset leading-relaxed">
          {demoVideo.description}
        </p>
        <ul class="space-y-2 text-text-offset">
          <li class="flex items-start gap-3">
            <span class="mt-1 h-2.5 w-2.5 rounded-full bg-paqariYellow"></span>
            <span>Audio completo y narración clara para que no te pierdas ningún detalle.</span>
          </li>
          <li class="flex items-start gap-3">
            <span class="mt-1 h-2.5 w-2.5 rounded-full bg-paqariGreen"></span>
            <span>Controles visibles en pantalla para que decidas cuándo reproducir o pausar.</span>
          </li>
        </ul>
      </div>
      <div class="relative">
        <div class="relative overflow-hidden rounded-[28px] border border-white/10 bg-background/70 p-2 shadow-[0_20px_80px_-24px_rgba(0,0,0,0.45)] backdrop-blur">
          <div class="absolute inset-6 -z-10 animate-rotate-sheen rounded-full bg-[conic-gradient(#217276_10deg,transparent_140deg)] opacity-80 blur-3xl"></div>
          <div class="relative rounded-3xl bg-gradient-to-br from-background via-background-offset/60 to-background p-4">
            <VideoComponent
              client:load
              src="https://img.youtube.com/vi/ysz5S6PUM-U/maxresdefault.jpg"
              height={520}
              width={920}
              title={demoVideo.title}
              video_id={demoVideo.id}
              video_width="w-full"
              video_height="h-auto"
            />
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Porductos Categorías  -->
  <ProductsExperiencesHome/>
  {/* 
  <!-- key features -->
  <KeyFeatures key_features={key_features} />
  <!-- service -->
  <Service service={service} />
  */}  

  <GaleriaPaqari galery={galery} />  

  <!-- testimonial -->
  <Testimonial testimonial={testimonial} />

  <!-- call to action -->
  <Cta />
</Base>
