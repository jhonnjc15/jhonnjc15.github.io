---
const {
  source,
  className,
  networks = [],
  forceLight = false,
  sizeClass = "h-11 w-11",
} = Astro.props;
import TwitterX from "./TwitterXLogo.astro";
import { RiTelegramFill } from "react-icons/ri/index.js";

import {
  IoCall,
  IoGlobeOutline,
  IoLocation,
  IoLogoBehance,
  IoLogoBitbucket,
  IoLogoCodepen,
  IoLogoDiscord,
  IoLogoDribbble,
  IoLogoFacebook,
  IoLogoFoursquare,
  IoLogoGithub,
  IoLogoGitlab,
  IoLogoInstagram,
  IoLogoLinkedin,
  IoLogoMastodon,
  IoLogoMedium,
  IoLogoPinterest,
  IoLogoReddit,
  IoLogoRss,
  IoLogoSkype,
  IoLogoSlack,
  IoLogoSnapchat,
  IoLogoSoundcloud,
  IoLogoTiktok,
  IoLogoTumblr,
  IoLogoWhatsapp,
  IoLogoTwitter,
  IoLogoVimeo,
  IoLogoVk,
  IoLogoYoutube,
  IoMail
} from "react-icons/io5/index.js";

const {
  facebook,
  twitter,
  mastodon,
  instagram,
  youtube,
  linkedin,
  github,
  gitlab,
  discord,
  slack,
  medium,
  codepen,
  bitbucket,
  dribbble,
  behance,
  pinterest,
  soundcloud,
  tumblr,
  reddit,
  vk,
  whatsapp,
  snapchat,
  vimeo,
  tiktok,
  foursquare,
  rss,
  email,
  phone,
  address,
  skype,
  website,
  telegram,
} = source;

const itemClassBase = `relative inline-flex ${sizeClass} items-center justify-center rounded-full border bg-white/80 shadow-sm transition hover:border-primary/40 hover:bg-primary/10 hover:text-primary dark:hover:border-primary/60 dark:hover:bg-primary/20 dark:hover:text-primary`;
const itemClass = forceLight
  ? `${itemClassBase} border-black/20 text-black/70 dark:border-white/25 dark:bg-white/20 dark:text-white`
  : `${itemClassBase} border-black/15 text-text-offset dark:border-white/25 dark:bg-white/20 dark:text-white`;
const shouldRender = (network) => !networks.length || networks.includes(network);

const items = [
  { key: "facebook", href: facebook, label: "facebook", Icon: IoLogoFacebook },
  { key: "twitter", href: twitter, label: "twitter", Icon: TwitterX },
  { key: "telegram", href: telegram, label: "telegram", Icon: RiTelegramFill },
  { key: "mastodon", href: mastodon, label: "mastodon", Icon: IoLogoMastodon },
  { key: "instagram", href: instagram, label: "instagram", Icon: IoLogoInstagram },
  { key: "youtube", href: youtube, label: "youtube", Icon: IoLogoYoutube },
  { key: "linkedin", href: linkedin, label: "linkedin", Icon: IoLogoLinkedin },
  { key: "github", href: github, label: "github", Icon: IoLogoGithub },
  { key: "gitlab", href: gitlab, label: "gitlab", Icon: IoLogoGitlab },
  { key: "discord", href: discord, label: "discord", Icon: IoLogoDiscord },
  { key: "slack", href: slack, label: "slack", Icon: IoLogoSlack },
  { key: "medium", href: medium, label: "medium", Icon: IoLogoMedium },
  { key: "codepen", href: codepen, label: "codepen", Icon: IoLogoCodepen },
  { key: "bitbucket", href: bitbucket, label: "bitbucket", Icon: IoLogoBitbucket },
  { key: "dribbble", href: dribbble, label: "dribbble", Icon: IoLogoDribbble },
  { key: "behance", href: behance, label: "behance", Icon: IoLogoBehance },
  { key: "pinterest", href: pinterest, label: "pinterest", Icon: IoLogoPinterest },
  { key: "soundcloud", href: soundcloud, label: "soundcloud", Icon: IoLogoSoundcloud },
  { key: "tumblr", href: tumblr, label: "tumblr", Icon: IoLogoTumblr },
  { key: "reddit", href: reddit, label: "reddit", Icon: IoLogoReddit },
  { key: "vk", href: vk, label: "vk", Icon: IoLogoVk },
  { key: "whatsapp", href: whatsapp, label: "whatsapp", Icon: IoLogoWhatsapp },
  { key: "snapchat", href: snapchat, label: "snapchat", Icon: IoLogoSnapchat },
  { key: "vimeo", href: vimeo, label: "vimeo", Icon: IoLogoVimeo },
  { key: "tiktok", href: tiktok, label: "tiktok", Icon: IoLogoTiktok },
  { key: "foursquare", href: foursquare, label: "foursquare", Icon: IoLogoFoursquare },
  { key: "skype", href: skype, label: "skype", Icon: IoLogoSkype },
  { key: "website", href: website, label: "website", Icon: IoGlobeOutline },
  { key: "rss", href: rss, label: "rss feed", Icon: IoLogoRss },
  { key: "email", href: email ? `mailto:${email}` : "", label: "email", Icon: IoMail, external: false },
  { key: "phone", href: phone ? `tel:${phone}` : "", label: "telephone", Icon: IoCall, external: false },
  { key: "address", href: address, label: "location", Icon: IoLocation },
];

const isExternal = (item) => item.external ?? true;
---

<ul class={className}>
  {
    items
      .filter((item) => item.href && shouldRender(item.key))
      .map((item) => (
        <li class="inline-block">
          <a
            aria-label={item.label}
            href={item.href}
            target={isExternal(item) ? "_blank" : undefined}
            rel={isExternal(item) ? "noopener noreferrer nofollow" : undefined}
            class={itemClass}
          >
            <item.Icon />
          </a>
        </li>
      ))
  }
</ul>
