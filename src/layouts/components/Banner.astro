---
import { Image } from 'astro:assets';
import { getRelativeLocaleUrl } from "astro:i18n";
import { getI18N } from "@i18n/index";

const { banner } = Astro.props;
const { title, button, image, content } = banner;
const { currentLocale } = Astro;
const i18n = getI18N({ currentLocale });
const aboutPath = "/about";
const buttonLabel = button.label || i18n.COMMON.contact_cta;
---

<style>
  @media (max-width: 400px) {
    .banner-heading {
      font-size: 1.8rem;
      line-height: 1.1;
    }

    .banner-text {
      font-size: 1rem;
    }
  }
</style>

<section
  class="section banner relative overflow-hidden mt-0 mb-0 min-h-[100dvh] lg:min-h-[calc(100dvh-var(--header-total-height,148px))] flex items-center"
  style="--header-offset: var(--header-total-height, 148px); margin-top: calc(-1 * var(--header-offset)); padding-top: calc(var(--header-offset) + clamp(2.5rem, 1.5vw, 3.5rem)); padding-bottom: clamp(2.5rem, 3vw, 4rem);"
>
  <slot />
  <div class="pointer-events-none absolute inset-0 -z-10 bg-gradient-to-b from-transparent via-paqariGreen/5 to-transparent"></div>
  <div class="container relative">
    <div class="grid gap-8 lg:gap-12 lg:grid-cols-[1.05fr_minmax(0,0.9fr)] lg:items-center">
      <div class="relative flex justify-center sm:justify-start lg:order-1">
        <div class="max-w-4xl space-y-16 md:space-y-10 xl:space-y-7 text-center sm:text-left px-2 sm:px-0">
          <h1 data-animate="fade-right" class="banner-heading banner-title text-4xl md:text-5xl font-extrabold tracking-tight leading-[1.05] text-gray-900 dark:text-white">
            {title}
          </h1>
          <p data-animate="fade-right" class="banner-text my-4 text-lg font-semibold text-gray-700 dark:text-white/80 max-w-2xl mx-auto sm:mx-0">
            {content}
          </p>
          {button.enable && (
            <a
              class="group relative inline-flex items-center justify-center overflow-hidden rounded-2xl px-[3px] py-[3px] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-paqariYellow/80 focus-visible:ring-offset-2 focus-visible:ring-offset-background"
              href={getRelativeLocaleUrl(currentLocale ?? "", button.link || aboutPath)}
              data-animate="fade-right"
            >
              <span class="absolute inset-0 rounded-2xl bg-slate-900/60 blur-sm dark:blur-md"></span>
              <span class="pointer-events-none absolute inset-[-6px] rounded-[18px] bg-[conic-gradient(#f3a415_18deg,transparent_140deg)] opacity-80 animate-border-rotate"></span>
              <span class="relative z-10 inline-flex items-center justify-center rounded-xl bg-white/90 px-8 py-3.5 text-base font-semibold text-gray-900 shadow-[0_12px_35px_rgba(33,114,118,0.35)] transition duration-300 group-hover:text-white group-hover:bg-gradient-to-br group-hover:from-[#217276] group-hover:to-[#f3a415] dark:bg-slate-900/90 dark:text-white">
                {buttonLabel}
              </span>
            </a>
          )}
        </div>
      </div>
      <div class="hidden lg:flex lg:order-2" data-animate="zoom-in">
        <div class="relative mx-auto max-w-[460px] rounded-[32px] bg-gradient-to-br from-background to-background-offset p-5 shadow-[0_25px_90px_-28px_rgba(0,0,0,0.5)] flex items-center justify-center">
          <Image
            data-animate="fade-right"
            class="w-full object-contain drop-shadow-2xl"
            alt="banner"
            src={image}
            width={720}
            height={470}
          />
        </div>
      </div>
    </div>
  </div>
</section>
