---
interface Props {
  size?: number;
  width?: number;
  height?: number;

  top?: number;
  left?: number;
  right?: number;
  bottom?: number;

  from?: string;
  to?: string;
  color?: string;

  gradient?: boolean;
  radial?: boolean;
  dominant?: "from" | "to";

  fromStop?: number;   // ðŸ‘ˆ NUEVO
  toStop?: number;     // ðŸ‘ˆ NUEVO

  blur?: number;
  opacity?: number;

  rotate?: number;
  skewX?: number;
  skewY?: number;

  zIndex?: number;
}

const {
  size = 240,
  width,
  height,

  top,
  left,
  right,
  bottom,

  from = "#217276",
  to = "#f3a415",
  color = "#217276",

  gradient = true,
  radial = false,
  dominant = "from",

  fromStop = 20,   // ðŸ‘ˆ predomina el color principal
  toStop = 85,

  blur = 120,
  opacity = 0.3,

  rotate = 0,
  skewX = 12,
  skewY = 12,

  zIndex = 0,
} = Astro.props;

const shapeWidth = width ?? size;
const shapeHeight = height ?? size;
const clampedFromStop = Math.max(0, Math.min(100, fromStop));
const clampedToStop = Math.max(0, Math.min(100, toStop));
const startStop = Math.min(clampedFromStop, clampedToStop);
const endStop = Math.max(clampedFromStop, clampedToStop);
const [primaryColor, secondaryColor] = dominant === "to" ? [to, from] : [from, to];
const gradientStops = `
  ${primaryColor} 0%,
  ${primaryColor} ${startStop}%,
  ${secondaryColor} ${endStop}%,
  ${secondaryColor} 100%
`;

const style = `
  position: absolute;
  width: ${shapeWidth}px;
  height: ${shapeHeight}px;

  ${top !== undefined ? `top:${top}px;` : ""}
  ${left !== undefined ? `left:${left}px;` : ""}
  ${right !== undefined ? `right:${right}px;` : ""}
  ${bottom !== undefined ? `bottom:${bottom}px;` : ""}

  background: ${
    gradient
      ? radial
        ? `radial-gradient(
            circle,
            ${gradientStops}
          )`
        : `linear-gradient(
            45deg,
            ${gradientStops}
          )`
      : color
  };

  border-radius: 9999px;
  filter: blur(${blur}px);
  opacity: ${opacity};

  transform:
    rotate(${rotate}deg)
    skewX(${skewX}deg)
    skewY(${skewY}deg);

  z-index: ${zIndex};
  pointer-events: none;
`;
---

<span style={style} aria-hidden="true"></span>
